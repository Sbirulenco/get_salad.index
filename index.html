<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Device Report</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body { font-family: system-ui, sans-serif; max-width: 900px; margin: 32px auto; line-height: 1.6; background:#f7f7f7; color:#111; }
h1 { text-align:center; }
button { padding:10px 16px; border-radius:8px; cursor:pointer; margin-bottom:16px; }
#report { background:white; padding:20px; border-radius:10px; box-shadow:0 4px 12px rgba(0,0,0,0.1); }
p { margin:8px 0; }
strong { color:#222; }
</style>
</head>
<body>

<h1>Professional Device Report</h1>
<button id="start">Generate My Device Report</button>
<div id="report"></div>

<script>
const safeGet = (fn,fallback='Unknown')=>{ try { return fn(); } catch { return fallback; } };

const DeviceInfo = {
  async getIP() {
    try { const r=await fetch('https://api.ipify.org?format=json'); const j=await r.json(); return j.ip||'Unknown'; }
    catch { return 'Unknown'; }
  },
  async getBattery() {
    if(!navigator.getBattery) return 'Unknown';
    try { const b=await navigator.getBattery(); return Math.round(b.level*100)+'%'; }
    catch { return 'Unknown'; }
  },
  estimateRefreshRate(samples=60) {
    return new Promise(resolve=>{
      let count=0,start=null;
      const step=(ts)=>{
        if(!start){ start=ts; count=0; }
        else if(count>=samples){ resolve(Math.round(count*1000/(ts-start))); return; }
        count++; requestAnimationFrame(step);
      };
      requestAnimationFrame(step);
    });
  },
  getWebGLInfo() {
    const canvas=document.createElement('canvas');
    const gl=canvas.getContext('webgl')||canvas.getContext('experimental-webgl');
    if(!gl) return { vendor:'Unknown', renderer:'Unknown' };
    const dbg=gl.getExtension('WEBGL_debug_renderer_info');
    return {
      vendor: dbg? gl.getParameter(dbg.UNMASKED_VENDOR_WEBGL):'Unknown',
      renderer: dbg? gl.getParameter(dbg.UNMASKED_RENDERER_WEBGL):'Unknown'
    };
  },
  getNetworkType() { return navigator.connection?.effectiveType || 'Unknown'; },
  getTouchSupport() { return 'ontouchstart' in window || (navigator.maxTouchPoints>0); },
  getDarkMode() { return window.matchMedia('(prefers-color-scheme: dark)').matches; },
  getReducedMotion() { return window.matchMedia('(prefers-reduced-motion: reduce)').matches; }
};

// Friendly GPU parser
function parseGPU(name){
  if(!name) return 'an unknown GPU';
  name=name.toLowerCase();
  if(name.includes('nvidia')) {
    if(name.includes('rtx')) return name.toUpperCase();
    if(name.includes('gtx')) return name.toUpperCase();
    return 'an NVIDIA GPU';
  }
  if(name.includes('intel')) return 'an Intel GPU ('+name.toUpperCase()+')';
  if(name.includes('amd')||name.includes('radeon')) return 'an AMD Radeon GPU';
  return 'a '+name;
}

async function collectDeviceInfo() {
  const [ip,battery,refreshRate]=await Promise.all([
    DeviceInfo.getIP(),
    DeviceInfo.getBattery(),
    DeviceInfo.estimateRefreshRate()
  ]);
  const webgl=DeviceInfo.getWebGLInfo();
  return {
    ip,
    gpu: parseGPU(webgl.renderer),
    gpuVendor: webgl.vendor,
    screen: { width:screen.width, height:screen.height, availWidth:screen.availWidth, availHeight:screen.availHeight, refreshRate },
    viewport: { width:window.innerWidth, height:window.innerHeight },
    orientation: screen.orientation?.type || 'Unknown',
    os: safeGet(()=>navigator.platform),
    browser: safeGet(()=>navigator.userAgent),
    online: navigator.onLine ? 'online' : 'offline',
    network: DeviceInfo.getNetworkType(),
    darkMode: DeviceInfo.getDarkMode(),
    reducedMotion: DeviceInfo.getReducedMotion(),
    touch: DeviceInfo.getTouchSupport(),
    battery
  };
}

function displayFriendly(info){
  const container=document.getElementById('report');
  container.innerHTML=`
    <p><strong>Public IP:</strong> ${info.ip}</p>
    <p>You are running <strong>${info.os}</strong> using <strong>${info.browser}</strong>.</p>
    <p>Your screen resolution is <strong>${info.screen.width}×${info.screen.height}</strong> 
       (available ${info.screen.availWidth}×${info.screen.availHeight}) at approximately <strong>${info.screen.refreshRate}Hz</strong>.</p>
    <p>Your GPU is <strong>${info.gpu}</strong> (${info.gpuVendor}).</p>
    <p>You are currently <strong>${info.online}</strong> on a <strong>${info.network}</strong> connection.</p>
    <p>Viewport size: <strong>${info.viewport.width}×${info.viewport.height}</strong>.</p>
    <p>Screen orientation: <strong>${info.orientation}</strong>.</p>
    <p>Dark mode is <strong>${info.darkMode ? 'enabled' : 'disabled'}</strong>.</p>
    <p>Reduced motion preference is <strong>${info.reducedMotion ? 'enabled' : 'disabled'}</strong>.</p>
    <p>Touch support is <strong>${info.touch ? 'available' : 'not available'}</strong>.</p>
    <p>Battery level is <strong>${info.battery}</strong>.</p>
  `;
}

document.getElementById('start').addEventListener('click', async ()=>{
  const container=document.getElementById('report');
  container.innerHTML='<p>Generating your professional device report…</p>';
  const info=await collectDeviceInfo();
  displayFriendly(info);
});
</script>

</body>
</html>
